@{
    Layout = null;
    ViewData["Title"] = "Iniciar Sesión";
    var returnUrl = ViewData["ReturnUrl"] as string ?? "";
}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] — Sistema de Gestión de Llaves</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
          crossorigin="anonymous" />
    <!-- Bootstrap Icons -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />

    <style>
        :root {
            --brand-primary: #0369a1;
            --brand-dark:    #0c4a6e;
            --brand-light:   #e0f2fe;
        }

        html, body {
            height: 100%;
            margin: 0;
        }

        body {
            display: flex;
            background-color: #f1f5f9;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        /* ── Panel izquierdo (marca) ─────────────────────── */
        .brand-panel {
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 45%;
            min-height: 100vh;
            background: linear-gradient(145deg, var(--brand-dark) 0%, var(--brand-primary) 100%);
            color: #fff;
            padding: 3rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        @@media (min-width: 992px) {
            .brand-panel { display: flex; }
        }

        .brand-panel::before {
            content: "";
            position: absolute;
            width: 350px;
            height: 350px;
            border-radius: 50%;
            background: rgba(255,255,255,.06);
            top: -80px;
            right: -80px;
        }

        .brand-panel::after {
            content: "";
            position: absolute;
            width: 250px;
            height: 250px;
            border-radius: 50%;
            background: rgba(255,255,255,.06);
            bottom: -60px;
            left: -60px;
        }

        .brand-icon-circle {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            background: rgba(255,255,255,.15);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: 2.5rem;
        }

        .brand-title {
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: -.5px;
            margin-bottom: .5rem;
        }

        .brand-subtitle {
            font-size: .95rem;
            opacity: .75;
            max-width: 280px;
            line-height: 1.6;
        }

        .brand-features {
            list-style: none;
            padding: 0;
            margin: 2.5rem 0 0;
            text-align: left;
        }

        .brand-features li {
            display: flex;
            align-items: center;
            gap: .75rem;
            font-size: .9rem;
            opacity: .85;
            margin-bottom: .75rem;
        }

        .brand-features li i {
            font-size: 1.1rem;
            opacity: 1;
        }

        /* ── Panel derecho (formulario) ─────────────────── */
        .login-panel {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem 1rem;
            min-height: 100vh;
        }

        .login-card {
            background: #fff;
            border-radius: 1.25rem;
            box-shadow: 0 8px 30px rgba(0,0,0,.08);
            padding: 2.75rem 2.5rem;
            width: 100%;
            max-width: 420px;
        }

        .login-logo {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            background: var(--brand-light);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--brand-primary);
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .login-heading {
            font-size: 1.5rem;
            font-weight: 700;
            color: #0f172a;
            margin-bottom: .25rem;
        }

        .login-subheading {
            color: #64748b;
            font-size: .9rem;
            margin-bottom: 2rem;
        }

        /* Inputs */
        .form-label {
            font-size: .85rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: .4rem;
        }

        .input-icon-wrap {
            position: relative;
        }

        .input-icon-wrap .bi {
            position: absolute;
            left: .85rem;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
            font-size: 1rem;
            pointer-events: none;
        }

        .input-icon-wrap input {
            padding-left: 2.5rem;
            padding-right: 2.5rem;
            height: 46px;
            border: 1.5px solid #e2e8f0;
            border-radius: .6rem;
            font-size: .9rem;
            transition: border-color .2s, box-shadow .2s;
        }

        .input-icon-wrap input:focus {
            border-color: var(--brand-primary);
            box-shadow: 0 0 0 3px rgba(3,105,161,.12);
        }

        .btn-toggle-pw {
            position: absolute;
            right: .5rem;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #94a3b8;
            cursor: pointer;
            padding: .25rem .5rem;
            font-size: 1rem;
            line-height: 1;
        }

        .btn-toggle-pw:hover { color: var(--brand-primary); }

        /* Botón principal */
        .btn-login {
            width: 100%;
            height: 46px;
            background: var(--brand-primary);
            border: none;
            border-radius: .6rem;
            color: #fff;
            font-size: .95rem;
            font-weight: 600;
            letter-spacing: .3px;
            transition: background .2s, transform .1s;
        }

        .btn-login:hover  { background: var(--brand-dark); color: #fff; }
        .btn-login:active { transform: scale(.98); }

        /* Alerta error */
        .alert-error {
            background: #fef2f2;
            border: 1px solid #fecaca;
            border-left: 4px solid #ef4444;
            border-radius: .6rem;
            color: #991b1b;
            font-size: .875rem;
            padding: .75rem 1rem;
            display: flex;
            align-items: center;
            gap: .6rem;
            margin-bottom: 1.25rem;
        }

        /* Footer */
        .login-footer {
            text-align: center;
            color: #94a3b8;
            font-size: .78rem;
            margin-top: 2rem;
        }
    </style>
</head>
<body>

    <!-- ── Panel izquierdo (branding) ──────────────────── -->
    <div class="brand-panel">
        <div class="brand-icon-circle">
            <i class="bi bi-key-fill"></i>
        </div>
        <div class="brand-title">UPDS Llaves</div>
        <p class="brand-subtitle">
            Sistema de Gestión de Llaves — control seguro de accesos y ambientes universitarios.
        </p>

        <ul class="brand-features">
            <li><i class="bi bi-check-circle-fill text-success"></i> Control de préstamos en tiempo real</li>
            <li><i class="bi bi-check-circle-fill text-success"></i> Gestión de ambientes y personas autorizadas</li>
            <li><i class="bi bi-check-circle-fill text-success"></i> Registro de auditoría completo</li>
            <li><i class="bi bi-check-circle-fill text-success"></i> Alertas y notificaciones automáticas</li>
        </ul>
    </div>

    <!-- ── Panel derecho (formulario) ─────────────────── -->
    <div class="login-panel">
        <div class="login-card">

            <div class="login-logo">
                <i class="bi bi-shield-lock-fill"></i>
            </div>

            <h1 class="login-heading">Iniciar sesión</h1>
            <p class="login-subheading">Ingresa tus credenciales para continuar</p>

            @if (!string.IsNullOrEmpty(ViewBag.Error as string))
            {
                <div class="alert-error" role="alert">
                    <i class="bi bi-exclamation-circle-fill"></i>
                    @ViewBag.Error
                </div>
            }

            <form asp-action="Login" asp-controller="Cuenta" method="post" novalidate>
                <input type="hidden" name="returnUrl" value="@returnUrl" />

                <!-- Usuario -->
                <div class="mb-3">
                    <label for="username" class="form-label">Usuario</label>
                    <div class="input-icon-wrap">
                        <i class="bi bi-person"></i>
                        <input type="text"
                               id="username"
                               name="username"
                               class="form-control"
                               placeholder="Ej. admin"
                               autocomplete="username"
                               autofocus
                               required />
                    </div>
                </div>

                <!-- Contraseña -->
                <div class="mb-4">
                    <label for="password" class="form-label">Contraseña</label>
                    <div class="input-icon-wrap">
                        <i class="bi bi-lock"></i>
                        <input type="password"
                               id="password"
                               name="password"
                               class="form-control"
                               placeholder="••••••••"
                               autocomplete="current-password"
                               required />
                        <button type="button"
                                class="btn-toggle-pw"
                                onclick="togglePassword()"
                                tabindex="-1"
                                aria-label="Mostrar/ocultar contraseña">
                            <i class="bi bi-eye" id="eyeIcon"></i>
                        </button>
                    </div>
                </div>

                <button type="submit" class="btn btn-login">
                    <i class="bi bi-box-arrow-in-right me-2"></i>Ingresar al sistema
                </button>
            </form>

            <div class="login-footer">
                &copy; @DateTime.Now.Year Universidad Privada Domingo Savio &mdash; UPDS
            </div>

        </div>
    </div>

    <script>
        function togglePassword() {
            const input = document.getElementById('password');
            const icon  = document.getElementById('eyeIcon');
            const show  = input.type === 'password';
            input.type  = show ? 'text' : 'password';
            icon.className = show ? 'bi bi-eye-slash' : 'bi bi-eye';
        }
    </script>
</body>
</html>
