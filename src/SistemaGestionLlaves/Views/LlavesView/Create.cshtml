@model SistemaGestionLlaves.Models.Llave
@{
    ViewData["Title"] = "Nueva Llave";
}

<!-- Header -->
<div class="d-flex align-items-center justify-content-between mb-4">
    <div>
        <h2 class="fw-bold" style="color:#0f172a; font-size:1.4rem; margin-bottom:2px;">
            <i class="bi bi-plus-circle me-2" style="color:#0369a1;"></i>Nueva Llave
        </h2>
        <p class="mb-0" style="color:#64748b; font-size:0.875rem;">Registra una nueva llave física en el sistema</p>
    </div>
    <a asp-action="Index" class="btn px-4 py-2"
       style="background:#f1f5f9; color:#64748b; border-radius:12px; font-weight:600; border:none;">
        <i class="bi bi-arrow-left me-1"></i>Volver
    </a>
</div>

<div class="row justify-content-center">
    <div class="col-lg-7">
        <div class="ui-card">
            <h3 class="card-title mb-4">
                <i class="bi bi-key me-2" style="color:#0369a1;"></i>Datos de la Llave
            </h3>

            <form asp-action="Create" method="post">
                @Html.AntiForgeryToken()
                <div asp-validation-summary="ModelOnly" class="alert mb-4"
                     style="background:#fee2e2; border:none; border-radius:12px; color:#991b1b; font-size:0.875rem;"></div>

                <!-- Código -->
                <div class="mb-4">
                    <label asp-for="Codigo" class="form-label fw-600"
                           style="color:#64748b; font-size:0.8rem; text-transform:uppercase; letter-spacing:0.05em;">
                        Código <span class="text-danger">*</span>
                    </label>
                    <input asp-for="Codigo" class="form-control"
                           placeholder="Ej: LLV-101"
                           style="border-color:#e2e8f0; border-radius:12px; padding:12px 16px; background:#f8fafc;" />
                    <span asp-validation-for="Codigo" class="text-danger small mt-1 d-block"></span>
                    <small style="color:#94a3b8;">Máximo 30 caracteres. Se guardará en mayúsculas.</small>
                </div>

                <!-- Ambiente -->
                <div class="mb-4">
                    <label asp-for="IdAmbiente" class="form-label fw-600"
                           style="color:#64748b; font-size:0.8rem; text-transform:uppercase; letter-spacing:0.05em;">
                        Ambiente <span class="text-danger">*</span>
                    </label>
                    <select asp-for="IdAmbiente" asp-items="@((SelectList)ViewData["IdAmbiente"])"
                            class="form-select"
                            style="border-color:#e2e8f0; border-radius:12px; padding:12px 16px; background:#f8fafc;">
                        <option value="">-- Selecciona un ambiente --</option>
                    </select>
                    <span asp-validation-for="IdAmbiente" class="text-danger small mt-1 d-block"></span>
                </div>

                <!-- Número de Copias -->
                <div class="mb-4">
                    <label asp-for="NumCopias" class="form-label fw-600"
                           style="color:#64748b; font-size:0.8rem; text-transform:uppercase; letter-spacing:0.05em;">
                        Número de Copias <span class="text-danger">*</span>
                    </label>
                    <input asp-for="NumCopias" type="number" min="1" class="form-control"
                           style="border-color:#e2e8f0; border-radius:12px; padding:12px 16px; background:#f8fafc;" />
                    <span asp-validation-for="NumCopias" class="text-danger small mt-1 d-block"></span>
                </div>

                <!-- Llave Maestra -->
                <div class="mb-4">
                    <div class="d-flex align-items-center gap-3 p-3"
                         style="background:#f8fafc; border-radius:12px; border:1px solid #e2e8f0;">
                        <div class="form-check form-switch mb-0">
                            <input asp-for="EsMaestra" class="form-check-input" role="switch"
                                   style="width:2.5rem; height:1.3rem;" />
                        </div>
                        <div>
                            <label asp-for="EsMaestra" class="form-check-label fw-bold" style="color:#0f172a;">
                                Llave Maestra
                            </label>
                            <p class="mb-0 small" style="color:#64748b;">Da acceso a múltiples ambientes</p>
                        </div>
                    </div>
                </div>

                <!-- Observaciones -->
                <div class="mb-4">
                    <label asp-for="Observaciones" class="form-label fw-600"
                           style="color:#64748b; font-size:0.8rem; text-transform:uppercase; letter-spacing:0.05em;">
                        Observaciones
                    </label>
                    <textarea asp-for="Observaciones" class="form-control" rows="3"
                              placeholder="Información adicional sobre la llave..."
                              style="border-color:#e2e8f0; border-radius:12px; padding:12px 16px; background:#f8fafc; resize:none;"></textarea>
                    <span asp-validation-for="Observaciones" class="text-danger small mt-1 d-block"></span>
                </div>

                <!-- Botones -->
                <div class="d-flex gap-3 pt-2">
                    <button type="submit" class="btn px-5 py-2 flex-fill"
                            style="background:#0369a1; color:white; border-radius:12px; font-weight:600; border:none;">
                        <i class="bi bi-check-lg me-2"></i>Guardar Llave
                    </button>
                    <a asp-action="Index" class="btn px-4 py-2"
                       style="background:#f1f5f9; color:#64748b; border-radius:12px; font-weight:600; border:none;">
                        Cancelar
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
